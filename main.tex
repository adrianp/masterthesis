%% Using LaTeX-Boilerplate by Adrian-Tudor Panescu %%
%% https://github.com/adrianp/latex-boilerplate %%

\documentclass[12pt,a4paper]{report}

\def\pdfshellescape{1} % for epstopdf


\usepackage[utf8]{inputenc}
\usepackage[british]{babel}

\usepackage{algorithm}  % in texlive-science
\usepackage{algorithmic}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{appendix}
\usepackage{caption}
\usepackage{emptypage}
\usepackage[left=2.5cm,right=2cm,top=3cm,bottom=3cm,twoside]{geometry}
\usepackage{graphicx}
\usepackage[hidelinks]{hyperref}
\usepackage{listings}
\usepackage{makeidx}
\usepackage{nopageno}
\usepackage{pdfpages}
\usepackage{placeins}
\usepackage{qtree}  % in texlive-humanities
\usepackage{standalone}
\usepackage{subcaption}
\usepackage{titlesec}

\usepackage{epstopdf}  % load after graphic[s,x]


%% headers
\titleformat{\chapter}{\normalfont\huge}{\thechapter.}{20pt}{\huge}
\pagestyle{myheadings}
\renewcommand{\chaptermark}[1]{ \markboth{#1}{} }
\renewcommand{\sectionmark}[1]{ \markright{#1}{} }

%% bold float labels
\DeclareCaptionLabelFormat{myformat}{\textbf{#1}~\textbf{#2}}
\captionsetup{labelformat=myformat}

%% Give numbers to subsubsections and add them to index
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

%% rename index with care for babel package
\addto\captionsbritish{%
  \renewcommand{\contentsname}%
  {Table of Contents}%
}

%% special table cell that allows line breaks
\newcommand{\specialcell}[2][l]{%
  \begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}

%% do not split long footnotes over multiple pages
\interfootnotelinepenalty=10000

%% uncomment to add a DRAFT watermark on all pages
\input{utils/draft.tex}

\begin{document}

  \pagenumbering{roman}

  \input{sections/title.tex}

  % blank pages are inserted for two-side printing
  \input{utils/blank.tex}

  \begin{abstract}
    \input{sections/abstract.tex}
  \end{abstract}

  \cleardoublepage

  \tableofcontents
  \listoffigures

  % next page will be odd-numbered (assumes \FloatBarrier)
  \cleardoublepage

  \pagenumbering{arabic}

  \chapter{Introduction}
    \label{sec:intro}

    \section{Invenio Digital Library Platform}
      \label{sec:invenio}
      \input{sections/intro/invenio/main.tex}

      \newpage

      \subsection{CERN Document Server}
        \label{sec:cds}
        \input{sections/intro/invenio/cds.tex}

    \section{Motivation}
      \label{sec:motiv}
        \input{sections/intro/motiv/motiv.tex}

      \subsection{Use Cases}
        \label{sec:usecases}
        \input{sections/intro/motiv/main.tex}

  \cleardoublepage

  \chapter{State of the Art}
    \label{sec:soa}
    \input{sections/soa/main.tex}

    \section{Commenting and Annotation Systems}
      \label{sec:comments}
      \input{sections/soa/comments/main.tex}

    \clearpage

    \section{Linked and Structured Data}
      \label{sec:data}
      \input{sections/soa/data/main.tex}

      \subsection{Open Annotation}
        \label{sec:oa}
        \input{sections/soa/data/oa.tex}

  \cleardoublepage

  \chapter{System Design}
    \label{sec:design}
    \input{sections/design/main.tex}

    \section{Annotation Framework}
      \label{sec:anno}
      \input{sections/design/anno/main.tex}

    \section{Invenio Framework}
      \label{sec:v2}
      \input{sections/design/v2/main.tex}

  \cleardoublepage

  \chapter{Implementation}
    \label{sec:impl}
    \input{sections/impl/main.tex}

    \section{General Resource Annotator}
      \label{sec:gra}
      \input{sections/impl/gra/main.tex}

    \newpage

    \section{Targeted Document Annotations}
      \label{sec:notes}
      \input{sections/impl/notes/main.tex}

    \clearpage

    \section{Dissemination}
      \label{sec:diss}
      \input{sections/impl/diss/main.tex}

      \subsection{JavaScript Object Notation for Linked Data}
        \label{sec:json}
        \input{sections/impl/diss/json.tex}

      \clearpage

      \subsection{Annotation Publishing}
        \label{sec:pub}
        \input{sections/impl/diss/pub.tex}

    \clearpage

    \section{Future Directions}
        \label{sec:future}
        \input{sections/impl/future/main.tex}

  \cleardoublepage

  \chapter{Conclusions}
    \label{sec:outro}
    \input{sections/outro/main.tex}

  \cleardoublepage

  \bibliographystyle{alpha}
  \bibliography{bib/myrefs}

  \cleardoublepage

  \appendixpage
  \addappheadtotoc

  \cleardoublepage

  \appendix

    \renewcommand\thesection{\Alph{section}}

    \section{Open Repositories and AAHEP7 Submissions}
      \label{apx:or2014}
      \input{sections/appendices/or2014.tex}

    \cleardoublepage

    \section{Source Code Contributions}
      \label{apx:code}
      \input{sections/appendices/code.tex}

\end{document}
