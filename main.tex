%% Using LaTeX-Boilerplate by Adrian-Tudor Panescu %%
%% https://github.com/adrianp/latex-boilerplate %%

\documentclass[12pt,a4paper]{report}

\def\pdfshellescape{1} % for epstopdf


\usepackage[utf8]{inputenc}
\usepackage[british]{babel}

\usepackage{algorithm}  % in texlive-science
\usepackage{algorithmic}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{appendix}
\usepackage{caption}
\usepackage[left=2.5cm,right=2cm,top=3cm,bottom=3cm,twoside]{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{makeidx}
\usepackage{pdfpages}
\usepackage{placeins}
\usepackage{standalone}
\usepackage{subcaption}

\usepackage{epstopdf}  % load after graphic[s,x]


%% bold float labels
\DeclareCaptionLabelFormat{myformat}{\textbf{#1}~\textbf{#2}}
\captionsetup{labelformat=myformat}

%% detailled margin sizes
%\addtolength{\textwidth}{4cm}
%\addtolength{\oddsidemargin}{-1.5cm}
%\addtolength{\evensidemargin}{-1.5cm}
%\addtolength{\textheight}{4.5cm}
%\addtolength{\topmargin}{-3cm}
%\setlength{\parindent}{0pt}
%\setlength{\parskip}{1ex}

%% Section number format
\renewcommand*\thesection{\arabic{section}}

%% Give numbers to subsubsections and add them to index
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

%% rename index with care for babel package
\addto\captionsbritish{%
  \renewcommand{\contentsname}%
  {Table of Contents}%
}

%% special table cell that allows line breaks
\newcommand{\specialcell}[2][l]{%
  \begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}

%% do not split long footnotes over multiple pages
\interfootnotelinepenalty=10000

%% uncomment to add a DRAFT watermark on all pages
\input{utils/draft.tex}

\begin{document}

  \pagenumbering{roman}

  \input{sections/title.tex}

  % blank pages are inserted for two-side printing
  \input{utils/blank.tex}

  \begin{abstract}
    \input{sections/abstract.tex}
  \end{abstract}

  \cleardoublepage

  \tableofcontents
  \listoffigures

  % next page will be odd-numbered (assumes \FloatBarrier)
  \cleardoublepage

  \pagenumbering{arabic}
  %\pagestyle{headings}

  \section{Introduction}
    \label{sec:intro}

    \subsection{Invenio Digital Library Platform}
      \label{sec:invenio}
      \input{sections/intro/invenio/main.tex}

      \subsubsection{CERN Document Server}
        \label{sec:cds}
        \input{sections/intro/invenio/cds.tex}

    \subsection{Motivation}
      \label{sec:motiv}
      \input{sections/intro/motiv/main.tex}

    \input{sections/intro/main.tex}

  \cleardoublepage

  \section{State of the Art}
    \label{sec:soa}
    \input{sections/soa/main.tex}

    \subsection{Commenting and Annotation Systems}
      \label{sec:comments}
      \input{sections/soa/comments/main.tex}

    \clearpage

    \subsection{Linked and Structured Data}
      \label{sec:data}
      \input{sections/soa/data/main.tex}

      \subsubsection{Open Annotation}
        \label{sec:oa}
        \input{sections/soa/data/oa.tex}

  \cleardoublepage

  \section{System Design}
    \label{sec:design}
    \input{sections/design/main.tex}

    \subsection{Annotation Framework}
      \label{sec:anno}
      \input{sections/design/anno/main.tex}

    \subsection{Invenio Framework}
      \label{sec:v2}
      \input{sections/design/v2/main.tex}

  \cleardoublepage

  \section{Implementation}
    \label{sec:impl}
    \input{sections/impl/main.tex}

    \subsection{General Resource Annotator}
      \label{sec:gra}
      \input{sections/impl/gra/main.tex}

    \subsection{Targeted Document Annotations}
      \label{sec:notes}
      \input{sections/impl/notes/main.tex}

    \clearpage

    \subsection{Dissemination}
      \label{sec:diss}
      \input{sections/impl/diss/main.tex}

      \subsubsection{JavaScript Object Notation for Linked Data}
        \label{sec:json}
        \input{sections/impl/diss/json.tex}

      \clearpage

      \subsubsection{Annotation Publishing}
        \label{sec:pub}
        \input{sections/impl/diss/pub.tex}

  \cleardoublepage

  \section{Conclusions and Future Directions}
    \label{sec:outro}
    \input{sections/outro/main.tex}

  \cleardoublepage

  \bibliographystyle{alpha}
  \bibliography{bib/myrefs}

  \cleardoublepage

  \appendixpage
  \addappheadtotoc

  \appendix
    \section{Open Repositories 2014 Paper Submission}
      \label{apx:or2014}
      \input{sections/appendices/or2014.tex}

    \cleardoublepage

    \section{Source Code Contributions}
      \label{apx:code}
      \input{sections/appendices/code.tex}

\end{document}
